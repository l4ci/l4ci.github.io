<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Berechne die Kosten deines Meetings in Echtzeit. Visualisiere, wie viel Zeit und Geld deine Besprechungen kosten.">
  <meta name="keywords" content="Meeting, Kosten, Rechner, Calculator, Zeit, ProduktivitÃ¤t">
  <meta name="author" content="Meeting Cost Calculator">
  
  <!-- Open Graph -->
  <meta property="og:title" content="ğŸ’° Meeting-Kostenrechner">
  <meta property="og:description" content="Berechne die Kosten deines Meetings in Echtzeit">
  <meta property="og:type" content="website">
  <meta property="og:image" content="./assets/og-image.png">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ğŸ’° Meeting-Kostenrechner">
  <meta name="twitter:description" content="Berechne die Kosten deines Meetings in Echtzeit">
  <meta name="twitter:image" content="./assets/og-image.png">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-touch-icon.png">
  
  <!-- Theme Color -->
  <meta name="theme-color" content="#3b82f6">
  
  <title>ğŸ’° Meeting-Kostenrechner</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="./css/styles.css">
  
  <!-- Vue.js 3 -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
  
  <!-- ==================== VUE APP ==================== -->
  <div id="app" v-cloak>
    
    <!-- Header -->
    <header class="header">
      <h1>{{ t('title') }}</h1>
    </header>
    
    <!-- Main Container -->
    <div class="container">
      
      <!-- Main Card -->
      <div class="main-card">
        
        <!-- Timer Section -->
        <div class="timer-section">
          <div class="timer-label">{{ t('elapsedTime') }}</div>
          <div class="timer-display">{{ formattedElapsedTime }}</div>
        </div>
        
        <!-- Cost Section -->
        <div class="cost-section">
          <div class="cost-label">{{ t('totalCostLabel') }}</div>
          <div class="cost-value">{{ formattedTotalCost }}</div>
        </div>
        
        <!-- Timer Controls -->
        <div class="timer-controls">
          <button 
            class="btn btn-primary btn-icon"
            @click="toggleTimer"
            :aria-label="timerButtonText"
          >
            <span>{{ timerButtonIcon }}</span>
            <span>{{ timerButtonText }}</span>
          </button>
          
          <button 
            class="btn btn-secondary btn-icon"
            @click="resetTimer"
            :disabled="elapsedTime === 0"
            :aria-label="t('reset')"
          >
            <span>ğŸ”„</span>
            <span>{{ t('reset') }}</span>
          </button>
        </div>
        
        <!-- Settings Grid -->
        <div class="settings-grid">
          
          <!-- People Counter -->
          <div class="setting-group">
            <label class="setting-label">{{ t('participants') }}</label>
            <div class="people-counter">
              <button 
                class="counter-btn"
                @click="updatePeopleCount(-1)"
                :disabled="!canDecreasePeople"
                aria-label="Teilnehmer verringern"
              >
                âˆ’
              </button>
              
              <input 
                type="number"
                class="input"
                v-model.number="currentPeopleCount"
                @change="onPeopleInputChange"
                :min="1"
                :max="100"
                aria-label="Anzahl Teilnehmer"
              >
              
              <button 
                class="counter-btn"
                @click="updatePeopleCount(1)"
                :disabled="!canIncreasePeople"
                aria-label="Teilnehmer erhÃ¶hen"
              >
                +
              </button>
            </div>
          </div>
          
          <!-- Cost Per Person -->
          <div class="setting-group">
            <label class="setting-label" for="costPerPerson">
              {{ t('costPerPerson') }}
            </label>
            <input 
              type="number"
              id="costPerPerson"
              class="input"
              v-model.number="costPerPerson"
              @change="onCostInputChange"
              step="0.01"
              min="0"
              max="1000"
            >
          </div>
          
          <!-- Currency -->
          <div class="setting-group">
            <label class="setting-label" for="currency">
              {{ t('currency') }}
            </label>
            <select 
              id="currency"
              class="select"
              v-model="currency"
              @change="onCurrencyChange"
            >
              <option v-for="curr in currencies" :key="curr" :value="curr">
                {{ curr }}
              </option>
            </select>
          </div>
          
          <!-- Language -->
          <div class="setting-group">
            <label class="setting-label" for="language">
              {{ t('language') }}
            </label>
            <select 
              id="language"
              class="select"
              v-model="language"
              @change="onLanguageChange"
            >
              <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
              <option value="en">ğŸ‡¬ğŸ‡§ English</option>
              <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
              <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
              <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
              <option value="pl">ğŸ‡µğŸ‡± Polski</option>
            </select>
          </div>
          
          <!-- Theme -->
          <div class="setting-group">
            <label class="setting-label" for="theme">
              {{ t('theme') }}
            </label>
            <select 
              id="theme"
              class="select"
              v-model="theme"
              @change="onThemeChange"
            >
              <option value="auto">ğŸŒ“ Auto</option>
              <option value="light">â˜€ï¸ Light</option>
              <option value="dark">ğŸŒ™ Dark</option>
            </select>
          </div>
          
        </div>
        
        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn btn-outline" @click="toggleInfoModal">
            â„¹ï¸ {{ t('info') }}
          </button>
          
          <button class="btn btn-outline" @click="toggleShareModal">
            ğŸ“¤ {{ t('shareSession') }}
          </button>
          
          <button class="btn btn-outline" @click="toggleHistoryModal">
            {{ historyButtonText }}
          </button>
          
          <button class="btn btn-outline" @click="toggleKeyboardModal">
            âŒ¨ï¸ {{ t('keyboardShortcuts') }}
          </button>
        </div>
        
      </div>
      
    </div>
    
    <!-- ==================== INFO MODAL ==================== -->
    <div class="modal-overlay" v-if="showInfoModal" @click.self="toggleInfoModal">
      <div class="modal" role="dialog" aria-labelledby="infoModalTitle">
        <div class="modal-header">
          <h2 id="infoModalTitle" class="modal-title">â„¹ï¸ {{ t('info') }}</h2>
          <button class="modal-close" @click="toggleInfoModal" aria-label="SchlieÃŸen">
            Ã—
          </button>
        </div>
        <div class="modal-body">
          <p class="mb-2">{{ t('infoText1') }}</p>
          <p class="mb-2">{{ t('infoText2') }}</p>
          <p class="mb-3">{{ t('infoText3') }}</p>
          
          <div style="padding: 1rem; background: var(--color-bg-tertiary); border-radius: var(--radius-md); border-left: 4px solid var(--color-primary);">
            <strong>ğŸ’¡ {{ t('proTip') }}</strong><br>
            {{ t('infoTip') }}
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" @click="toggleInfoModal">
            {{ t('close') }}
          </button>
        </div>
      </div>
    </div>
    
    <!-- ==================== SHARE MODAL ==================== -->
    <div class="modal-overlay" v-if="showShareModal" @click.self="toggleShareModal">
      <div class="modal" role="dialog" aria-labelledby="shareModalTitle">
        <div class="modal-header">
          <h2 id="shareModalTitle" class="modal-title">ğŸ“¤ {{ t('shareTitle') }}</h2>
          <button class="modal-close" @click="toggleShareModal" aria-label="SchlieÃŸen">
            Ã—
          </button>
        </div>
        <div class="modal-body">
          <p class="mb-2">{{ t('shareDescription') }}</p>
          
          <div class="share-url">
            <input 
              type="text"
              class="input"
              :value="shareUrl"
              readonly
              @click="$event.target.select()"
            >
            <button class="btn btn-primary" @click="copyShareUrl">
              ğŸ“‹ {{ t('copy') }}
            </button>
          </div>
          
          <div class="share-buttons">
            <button class="btn btn-outline" @click="shareNative" v-if="shareManager && shareManager.canUseNativeShare">
              ğŸ“± {{ t('share') }}
            </button>
            
            <button class="btn btn-outline" @click="shareEmail">
              ğŸ“§ {{ t('email') }}
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" @click="toggleShareModal">
            {{ t('close') }}
          </button>
        </div>
      </div>
    </div>
    
    <!-- ==================== HISTORY MODAL ==================== -->
    <div class="modal-overlay" v-if="showHistoryModal" @click.self="toggleHistoryModal">
      <div class="modal" role="dialog" aria-labelledby="historyModalTitle">
        <div class="modal-header">
          <h2 id="historyModalTitle" class="modal-title">ğŸ“Š {{ t('historyShow') }}</h2>
          <button class="modal-close" @click="toggleHistoryModal" aria-label="SchlieÃŸen">
            Ã—
          </button>
        </div>
        <div class="modal-body">
          
          <div v-if="meetingHistory.length === 0" class="history-empty">
            <p>Noch keine Meetings in der Historie.</p>
          </div>
          
          <div v-else class="history-list">
            <div 
              v-for="entry in meetingHistory" 
              :key="entry.id"
              class="history-item"
            >
              <div class="history-header">
                <div class="history-cost">
                  {{ formatCost(entry.totalCost, entry.currency) }}
                </div>
                <button 
                  class="btn btn-outline btn-icon"
                  @click="deleteHistoryEntry(entry.id)"
                  aria-label="Eintrag lÃ¶schen"
                  style="padding: 0.25rem 0.5rem; font-size: 0.875rem;"
                >
                  ğŸ—‘ï¸
                </button>
              </div>
              
              <div class="history-date">
                {{ formatDate(entry.date) }}
              </div>
              
              <div class="history-details">
                <span>â±ï¸ {{ formatElapsedTime(entry.elapsedTime) }}</span>
                <span>ğŸ‘¥ {{ entry.peopleCount }} {{ t('participants') }}</span>
                <span>ğŸ’° {{ entry.costPerPerson }} {{ entry.currency }}/h</span>
              </div>
              
              <div v-if="entry.segments && entry.segments.length > 1" class="history-segments">
                <div class="history-segments-title">Teilnehmer-Ã„nderungen:</div>
                <div 
                  v-for="(segment, index) in entry.segments"
                  :key="index"
                  class="history-segment"
                >
                  {{ formatHistoryEntry(segment, index) }}
                </div>
              </div>
            </div>
          </div>
          
        </div>
        <div class="modal-footer">
          <button 
            class="btn btn-secondary"
            @click="clearHistory"
            v-if="meetingHistory.length > 0"
          >
            ğŸ—‘ï¸ Historie lÃ¶schen
          </button>
          <button class="btn btn-primary" @click="toggleHistoryModal">
            {{ t('close') }}
          </button>
        </div>
      </div>
    </div>
    
    <!-- ==================== KEYBOARD SHORTCUTS MODAL ==================== -->
    <div class="modal-overlay" v-if="showKeyboardModal" @click.self="toggleKeyboardModal">
      <div class="modal" role="dialog" aria-labelledby="keyboardModalTitle">
        <div class="modal-header">
          <h2 id="keyboardModalTitle" class="modal-title">âŒ¨ï¸ {{ t('keyboardShortcuts') }}</h2>
          <button class="modal-close" @click="toggleKeyboardModal" aria-label="SchlieÃŸen">
            Ã—
          </button>
        </div>
        <div class="modal-body">
          <p class="mb-3">{{ t('keyboardShortcutsDescription') }}</p>
          
          <div class="shortcuts-list">
            <div class="shortcut-item">
              <div class="shortcut-keys">
                <span class="key">Space</span>
              </div>
              <div class="shortcut-description">{{ t('startPauseTimer') }}</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-keys">
                <span class="key">R</span>
              </div>
              <div class="shortcut-description">{{ t('resetTimer') }}</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-keys">
                <span class="key">+</span>
                <span style="color: var(--color-text-tertiary);">{{ t('or') }}</span>
                <span class="key">âˆ’</span>
              </div>
              <div class="shortcut-description">{{ t('adjustParticipants') }}</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-keys">
                <span class="key">I</span>
              </div>
              <div class="shortcut-description">{{ t('openInfo') }}</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-keys">
                <span class="key">Ctrl</span>
                <span class="key">S</span>
              </div>
              <div class="shortcut-description">{{ t('openShare') }}</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-keys">
                <span class="key">Ctrl</span>
                <span class="key">?</span>
              </div>
              <div class="shortcut-description">{{ t('showShortcuts') }}</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-keys">
                <span class="key">ESC</span>
              </div>
              <div class="shortcut-description">{{ t('closeModal') }}</div>
            </div>
          </div>
          
          <div style="margin-top: 1.5rem; padding: 1rem; background: var(--color-bg-tertiary); border-radius: var(--radius-md); border-left: 4px solid var(--color-success);">
            <strong>âœ¨ Tipp:</strong><br>
            {{ t('keyboardShortcutsTip') }}
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" @click="toggleKeyboardModal">
            {{ t('close') }}
          </button>
        </div>
      </div>
    </div>
    
  </div>
  
  <!-- ==================== SCRIPTS ==================== -->
  
  <!-- Config -->
  <script src="./js/config.js"></script>
  
  <!-- Translations -->
  <script src="./js/translations.js"></script>
  
  <!-- Utils -->
  <script src="./js/utils.js"></script>
  
  <!-- Formatters -->
  <script src="./js/formatters.js"></script>
  
  <!-- Storage -->
  <script src="./js/storage.js"></script>
  
  <!-- Timer -->
  <script src="./js/timer.js"></script>
  
  <!-- Notifications -->
  <script src="./js/notifications.js"></script>
  
  <!-- Emojis -->
  <script src="./js/emojis.js"></script>
  
  <!-- Modals -->
  <script src="./js/modals.js"></script>
  
  <!-- Main App -->
  <script src="./js/app.js"></script>
  
  <!-- v-cloak Style -->
  <style>
    [v-cloak] {
      display: none;
    }
  </style>
  
</body>
</html>
